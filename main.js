!function(){"use strict";const e=document.querySelector(".profile__edit-space"),t=document.querySelector(".profile__edit-button"),n={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},r=document.querySelector("#modal__form"),s=document.querySelector("#modal-name-input"),o=document.querySelector("#modal-description-input"),i=(document.querySelector(".profile__name"),document.querySelector(".profile__subtitle"),document.querySelector("#card__modal-form")),l="#elements-template";function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Array.from(document.querySelectorAll(n.formSelector));class c{constructor(e){a(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),a(this,"_handleOutsideClick",(e=>{e.target===e.currentTarget&&this.close()})),this._popUpElement=document.querySelector(e)}open(){this._popUpElement.classList.add("modal_box_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popUpElement.classList.remove("modal_box_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popUpElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._popUpElement.addEventListener("click",this._handleOutsideClick)}}class u extends c{constructor(e,t){super(e),this._popUpForm=this._popUpElement.querySelector(".modal__form"),this._handleFormSubmit=t}close(){this._popUpForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popUpForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}))}_getInputValues(){const e={};return this._popUpForm.querySelectorAll(".modal__input").forEach((t=>{e[t.name]=t.value})),e}}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{constructor(e,t){m(this,"_showInputError",(e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass)})),m(this,"_hideInputError",(e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass)})),m(this,"_toggleInputError",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e)})),m(this,"_hasInvalidInput",(e=>e.some((e=>!e.validity.valid)))),m(this,"toggleButtonState",(()=>{this._hasInvalidInput(this.inputList)?(this.buttonElement.classList.add(this._inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this._inactiveButtonClass),this.buttonElement.disabled=!1)})),m(this,"setEventListeners",(()=>{this.inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputError(e),this.toggleButtonState(e)}))}))})),m(this,"enableValidation",(()=>{this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this.setEventListeners()})),this._formElement=e,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this.inputList=Array.from(this._formElement.querySelectorAll(t.inputSelector)),this.buttonElement=this._formElement.querySelector(t.submitButtonSelector)}}class _{constructor(e,t,n,r){let{handleCardClick:s}=r;this._image=t,this._text=e,this._handleCardClick=s,this._cardSelector=n}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleCardClick()})),this._cardLikeButton.addEventListener("click",(()=>{this.toggleLikeButton()})),this._deleteCardButton.addEventListener("click",(()=>{this.removeCard()}))}toggleLikeButton(){this._cardLikeButton.classList.toggle("elements__like-button-black")}generateCard(){return this._element=document.querySelector(this._cardSelector).content.querySelector(".elements__element").cloneNode(!0),this._cardImage=this._element.querySelector(".elements__img"),this._cardLikeButton=this._element.querySelector(".elements__like-button"),this._deleteCardButton=this._element.querySelector(".element__delete-button"),this._element.querySelector(".elements__title").textContent=this._text,this._cardImage.src=this._image,this._cardImage.alt=this._text,this._setEventListeners(),this._element}removeCard(){this._element.remove(),this._element=null}}const p=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n)}getUserInfo(){const e={};return e.name=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__subtitle"}),h=new d(r,n);h.enableValidation();const v=new d(i,n);v.enableValidation();const E=new class{constructor(e,t){let{items:n,renderer:r}=e;this._initialArray=n,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._initialArray.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:y},".elements"),f=new class extends c{constructor(e){super(e),this.popUpImage=this._popUpElement.querySelector(".modal__image"),this.popUpCaption=this._popUpElement.querySelector(".modal__caption")}open(e,t){this.popUpImage.src=t,this.popUpImage.alt=e,this.popUpCaption.textContent=e,super.open()}}("#modal__image-popup");function y(e){return new _(e.name,e.link,l,{handleCardClick:()=>{f.open(e.name,e.link)}}).generateCard()}f.setEventListeners(),E.renderItems();const b=new u("#card",(function(e){const t=y(e);E.addItem(t),b.close()}));b.setEventListeners(),t.addEventListener("click",(()=>{v.toggleButtonState(),b.open()}));const g=new u("#profile__modal",(function(e){p.setUserInfo(e.name,e.description),g.close()}));e.addEventListener("click",(()=>{h.toggleButtonState();const e=p.getUserInfo();s.value=e.name,o.value=e.description,g.open()})),g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsQnVELEVBQVM5RSxLQUNUOEUsRUFBU1AsS0FDVGYsRUFDQSxDQUNFN0IsZ0JBQWlCQSxLQUNmOEMsRUFBa0I3RixLQUFLa0csRUFBUzlFLEtBQU04RSxFQUFTUCxLQUFLLElBSTNCaEMsY0FFakMsQ0FmQWtDLEVBQWtCdEYsb0JBQ2xCd0UsRUFBYU8sY0FnQmIsTUFBTWEsRUFBYSxJQUFJMUYsRUFBYyxTQTVDckMsU0FBOEJPLEdBQzVCLE1BQU1vRixFQUFVUixFQUFXNUUsR0FDM0IrRCxFQUFhUyxRQUFRWSxHQUNyQkQsRUFBV3ZHLE9BQ2IsSUF5Q0F1RyxFQUFXNUYsb0JBQ1hxRSxFQUFBQSxpQkFBNEMsU0FBUyxLQUNuREUsRUFBbUJwQyxvQkFDbkJ5RCxFQUFXbkcsTUFBTSxJQUduQixNQUFNcUcsRUFBZSxJQUFJNUYsRUFDdkIsbUJBekRGLFNBQWlDTyxHQUMvQmtELEVBQVNRLFlBQVkxRCxFQUFZSSxLQUFNSixFQUFZeUQsYUFDbkQ0QixFQUFhekcsT0FDZixJQXlEQWdGLEVBQUFBLGlCQUErQyxTQUFTLEtBQ3RERCxFQUFzQmpDLG9CQUN0QixNQUFNNEQsRUFBa0JwQyxFQUFTSyxjQUNqQ0ssRUFBQUEsTUFBNEIwQixFQUFnQmxGLEtBQzVDd0QsRUFBQUEsTUFBMkIwQixFQUFnQjdCLFlBQzNDNEIsRUFBYXJHLE1BQU0sSUFFckJxRyxFQUFhOUYsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxCb3hPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LXNwYWNlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcbmV4cG9ydCBjb25zdCBjYXJkTW9kYWxCb3hPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0XCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXRfaW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1uYW1lLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9fbW9kYWwtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gXCIuZWxlbWVudHNcIjtcclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2VsZW1lbnRzLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcilcclxuKTtcclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3BVcFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcFVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9ib3hfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcFVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfYm94X29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX2hhbmRsZU91dHNpZGVDbGljayA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcFVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU91dHNpZGVDbGljayk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wVXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wVXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3BVcEZvcm0gPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcFVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZUxpc3QgPSB0aGlzLl9wb3BVcEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICBpbnB1dFZhbHVlTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX3RvZ2dsZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9O1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IodGV4dCwgaW1hZ2UsIGNhcmRTZWxlY3RvciwgeyBoYW5kbGVDYXJkQ2xpY2sgfSkge1xyXG4gICAgdGhpcy5faW1hZ2UgPSBpbWFnZTtcclxuICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudG9nZ2xlTGlrZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ2FyZCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHRvZ2dsZUxpa2VCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uLWJsYWNrXCIpO1xyXG4gIH1cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RleHQ7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG59KTtcclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5kZXNjcmlwdGlvbik7XHJcbiAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gIGNhcmRzU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gIGNhcmRzUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLnByb2ZpbGVGb3JtRWxlbWVudCxcclxuICB2YWxpZGF0aW9uQ29uZmlnXHJcbik7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25zdGFudHMuY2FyZEZvcm1FbGVtZW50LFxyXG4gIHZhbGlkYXRpb25Db25maWdcclxuKTtcclxuXHJcbmNhcmRGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogY29uc3RhbnRzLmluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxyXG4gIH0sXHJcbiAgY29uc3RhbnRzLmNhcmRzQ29udGFpbmVyXHJcbik7XHJcbmNvbnN0IG5ld1BvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsX19pbWFnZS1wb3B1cFwiKTtcclxubmV3UG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2FyZHNTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YS5uYW1lLFxyXG4gICAgY2FyZERhdGEubGluayxcclxuICAgIGNvbnN0YW50cy5jYXJkU2VsZWN0b3IsXHJcbiAgICB7XHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgIG5ld1BvcHVwV2l0aEltYWdlLm9wZW4oY2FyZERhdGEubmFtZSwgY2FyZERhdGEubGluayk7XHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIG5ld0NhcmRFbGVtZW50O1xyXG59XHJcblxyXG5jb25zdCBjYXJkc1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjY2FyZFwiLCBoYW5kbGVDYXJkRm9ybVN1Ym1pdCk7XHJcbmNhcmRzUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3RhbnRzLmNhcmRNb2RhbEJveE9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjYXJkRm9ybVZhbGlkYXRpb24udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBjYXJkc1BvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlX19tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcbmNvbnN0YW50cy5wcm9maWxlTW9kYWxCb3hPcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0aW9uLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBjb25zdGFudHMubmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XHJcbiAgY29uc3RhbnRzLmpvYklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmRlc2NyaXB0aW9uO1xyXG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIiwiaW1wb3J0ICogYXMgY29uc3RhbnRzIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm9MaXN0ID0ge307XHJcbiAgICB1c2VySW5mb0xpc3QubmFtZSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgdXNlckluZm9MaXN0LmRlc2NyaXB0aW9uID0gdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiB1c2VySW5mb0xpc3Q7XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faW5pdGlhbEFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wVXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wVXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnBvcFVwSW1hZ2UgPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLnBvcFVwQ2FwdGlvbiA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuICBvcGVuKGlucHV0VmFsdWVOYW1lLCBpbnB1dFZhbHVlTGluaykge1xyXG4gICAgdGhpcy5wb3BVcEltYWdlLnNyYyA9IGlucHV0VmFsdWVMaW5rO1xyXG4gICAgdGhpcy5wb3BVcEltYWdlLmFsdCA9IGlucHV0VmFsdWVOYW1lO1xyXG4gICAgdGhpcy5wb3BVcENhcHRpb24udGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlTmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInByb2ZpbGVNb2RhbEJveE9wZW4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXJkTW9kYWxCb3hPcGVuIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZUZvcm1FbGVtZW50IiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjYXJkRm9ybUVsZW1lbnQiLCJjYXJkU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiUG9wdXAiLCJjb25zdHJ1Y3RvciIsInBvcFVwU2VsZWN0b3IiLCJfZGVmaW5lUHJvcGVydHkiLCJldnQiLCJrZXkiLCJ0aGlzIiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX3BvcFVwRWxlbWVudCIsIm9wZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZU91dHNpZGVDbGljayIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wVXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiaW5wdXRWYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0TGlzdCIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiYnV0dG9uRWxlbWVudCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfdG9nZ2xlSW5wdXRFcnJvciIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiQ2FyZCIsInRleHQiLCJpbWFnZSIsIl9yZWYiLCJoYW5kbGVDYXJkQ2xpY2siLCJfaW1hZ2UiLCJfdGV4dCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZSIsIl9jYXJkTGlrZUJ1dHRvbiIsInRvZ2dsZUxpa2VCdXR0b24iLCJfZGVsZXRlQ2FyZEJ1dHRvbiIsInJlbW92ZUNhcmQiLCJ0b2dnbGUiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwidXNlckluZm9MaXN0IiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsInByb2ZpbGVGb3JtVmFsaWRhdGlvbiIsImNvbnN0YW50cyIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkRm9ybVZhbGlkYXRpb24iLCJjYXJkc1NlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaW5pdGlhbEFycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImxpbmsiLCJjcmVhdGVDYXJkIiwibmV3UG9wdXBXaXRoSW1hZ2UiLCJwb3BVcEltYWdlIiwicG9wVXBDYXB0aW9uIiwiaW5wdXRWYWx1ZU5hbWUiLCJpbnB1dFZhbHVlTGluayIsImNhcmREYXRhIiwiY2FyZHNQb3B1cCIsIm5ld0NhcmQiLCJwcm9maWxlUG9wdXAiLCJjdXJyZW50VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9